<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
.calendar-heading,
.availability-heading {
  text-align: center;
  margin-top: 2%;
}

.arrow-button {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 45px; /* Adjust the font size as needed */
}

.arrow-button:hover {
    text-decoration: underline; /* Optional: Add underline on hover */
    color: blue;
}

.calendar-table {
  border-collapse: collapse;
  width: 80%;
  margin: 10%;
  margin-top: 2.5%;
}

.calendar-td {
  border: 1px solid black;
  text-align: right;
  padding: 5px;
  width: 150px; /* Ensure each day box takes up equal space (100% / 7 days) */
  height: 100px;
  vertical-align: top;
}

.calendar-th {
  border: 1px solid black;
  text-align: center;
  padding: 5px;
  width: 150px; /* Ensure each day box takes up equal space (100% / 7 days) */
  height: 15px;
}
.calendar-th {
  background-color: lightgray;
}
.availability-dots {
    list-style: none; /* Remove default bullet points */
    padding: 0; /* Remove default padding */
}
.availability-dots li {
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    margin-right: 2px;
}
.green-dot {
    background-color: green;
}
.red-dot {
    background-color: red;
}
</style>
</head>
<body>
  <div class="calendar-container">
    <h1 class="calendar-heading">
        <button onclick="updateCalendar('prev', '{{ month_name }}', '{{ year }}')" class="arrow-button">&#8249;</button>
        {{ month_name }} - {{ year }}
        <button onclick="updateCalendar('next', '{{ month_name }}', '{{ year }}')" class="arrow-button">&#8250;</button>            
    </h1>
    <h2 class="availability-heading">
      {{ heading }}
    </h2>
<form id="calendar-form" action="{{ url_for('calendars.calendar_post') }}" method="post">    
<table class="calendar-table">
  <thead>
    <tr>
      <th class="calendar-th">Monday</th>
      <th class="calendar-th">Tuesday</th>
      <th class="calendar-th">Wednesday</th>
      <th class="calendar-th">Thursday</th>
      <th class="calendar-th">Friday</th>
      <th class="calendar-th">Saturday</th>
      <th class="calendar-th">Sunday</th>
    </tr>
  </thead>
  <tbody>
    {% for week in calendar %}
        <tr>
            {% for day, availability in zipped_data %}
                <td class="calendar-td">{{ '' if day == 0 else day }}</td>
            {% endfor %}
        </tr>
    {% endfor %}
</tbody>
</table>
</form>
</div>
<script>
const subdirectory = '{{ subdirectory }}';

function updateCalendar(direction, month, year) {

// Send a GET request to update the calendar
fetch(`/${subdirectory}?month=${month}&year=${year}&direction=${direction}`)
  .then(response => response.text())
  .then(html => {
    // Replace the content of the calendar container
    document.querySelector('.calendar-container').innerHTML = html;
  })
  .catch(error => console.error('Error updating calendar:', error));
}
</script>
</body>
</html>
